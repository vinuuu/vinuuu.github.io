var table = require('text-table');
var chalk = require('chalk');

function prettyOutput(result) {
  var opts = {
    align: ['l', 'c', 'c', 'l'],
    stringLength: function (s) {
      return chalk.stripColor(s).length;
    }
  };
  var h = [
    [
      chalk.underline('Name'),
      chalk.underline('Installed'),
      chalk.underline('Patched'),
      chalk.underline('Url'),
      chalk.underline('Vulnerable Dependency')
    ]
  ];

  result.forEach(function (module) {
    h.push([
      module.module,
      module.version, /* jscs:disable */
      module.advisory.patched_versions,
      module.advisory.url,
      module.dependencyOf.join(' > ')   /* jscs:enable */
    ]);
  });
  var t = table(h, opts);
  return t;
}

module.exports = prettyOutput;
